

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-TW" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-TW" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>訪問請求 &mdash; CodeIgniter4 4.1.5 說明文件</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/js/citheme.js"></script>
        <script type="text/javascript" src="../_static/js/carbon.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/citheme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="內容協商" href="content_negotiation.html" />
    <link rel="prev" title="Request 類別" href="request.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #DD4814" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/ci-logo-text.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">歡迎加入 CodeIgniter4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html">歡迎加入 CodeIgniter4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/requirements.html">系統需求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/credits.html">貢獻</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/psr.html">PSR 規範</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">安裝指引</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_composer.html">Composer 安裝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_manual.html">手動安裝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/running.html">執行你的應用程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/upgrading.html">從舊版升級</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/troubleshooting.html">故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/repositories.html">CodeIgniter 儲存庫</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">建構第一個應用程式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">靜態頁面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">新聞頁面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">建立新聞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">結論</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">CodeIgniter4 概觀</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/structure.html">應用程式結構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/mvc.html">模型、視圖與控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/autoloader.html">自動載入檔案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/services.html">服務（services）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/factories.html">工廠模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/http.html">處裡 HTTP 請求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/security.html">安全指南</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">一般主題</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/configuration.html">組態設定檔案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">CodeIgniter URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">全域函數與常數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/logging.html">記錄日誌資訊</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">錯誤處理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">網頁快取</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ajax.html">AJAX 請求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/modules.html">程式碼模組</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">管理你的應用程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">處理多種環境</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">控制器與路由</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="controllers.html">控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">URI 路由設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="filters.html">控制器過濾器</a></li>
<li class="toctree-l2"><a class="reference internal" href="message.html">HTTP 訊息</a></li>
<li class="toctree-l2"><a class="reference internal" href="request.html">Request 類別</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">訪問請求</a></li>
<li class="toctree-l2"><a class="reference internal" href="content_negotiation.html">內容協商</a></li>
<li class="toctree-l2"><a class="reference internal" href="methodspoofing.html">HTTP 類型偽裝</a></li>
<li class="toctree-l2"><a class="reference internal" href="restful.html">處理 RESTful 請求資源</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../outgoing/index.html">建構響應</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/views.html">視圖</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_cells.html">視圖單元</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_renderer.html">視圖渲染</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_layouts.html">視圖布局</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_parser.html">視圖解釋器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/table.html">HTML 表格類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/response.html">HTTP 響應</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/api_responses.html">API 響應特性</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/localization.html">本土化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/alternative_php.html">用於視圖檔案的 PHP 語法</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">資料庫操作</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">快速入門: 範例程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">資料庫組態設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">連接你的資料庫</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">執行查詢</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">產生查詢結果</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">查詢輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">查詢生成器類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">交易</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">詮釋資料</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">自訂函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/events.html">資料庫事件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">資料庫工具</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">資料模型化</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/model.html">使用 CodeIgniter 的模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/entities.html">使用實體類別</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dbmgmt/index.html">資料庫管理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/forge.html">資料庫操控與資料庫建構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/migration.html">資料庫遷移</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/seeds.html">資料庫填充</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">程式庫參考</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">Caching Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cookies.html">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/curlrequest.html">CURLRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Email Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">加密服務</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html#file-collections">File Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/honeypot.html">誘捕系統類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/images.html">Image Manipulation Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">Pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/publisher.html">Publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">安全性類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">Session Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/throttler.html">Throttler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/time.html">Times and Dates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">Typography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uploaded_files.html">Working with Uploaded Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">Working with URIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">User Agent Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/validation.html">Validation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">輔助函數</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../helpers/array_helper.html">陣列輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/cookie_helper.html">Cookie 輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/date_helper.html">日期輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/filesystem_helper.html">檔案系統輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/form_helper.html">表單輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/html_helper.html">HTML Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/inflector_helper.html">Inflector 輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/number_helper.html">Number 輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/security_helper.html">安全性輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/test_helper.html">Test Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/text_helper.html">Text Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/url_helper.html">URL Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/xml_helper.html">XML 輔助函數</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">測試</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing/overview.html">入門</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/database.html">資料庫測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/fabricator.html">Generating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/controllers.html">控制器測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/feature.html">HTTP 特性測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/response.html">測試響應</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/benchmark.html">基準測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/debugging.html">偵錯與除錯應用程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/mocking.html">Mocking</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">使用命令列介面</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli.html">透過命命列執行</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_commands.html">自訂命令列介面指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_generators.html">CLI 產生器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_library.html">命令列程式庫</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_request.html">CLI 請求類別</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">擴充 CodeIgniter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/core_classes.html">建立核心系統類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/common.html">替換常用功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/events.html">事件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/basecontroller.html">擴充控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/authentication.html">認證方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/contributing.html">為 CodeIgniter 貢獻</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translation/index.html">CodeIgniter4 文件翻譯</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../translation/glossary.html">詞彙對照表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translation/members.html">翻譯貢獻者</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CodeIgniter4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">控制器與路由</a> &raquo;</li>
        
      <li>訪問請求</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>訪問請求<a class="headerlink" href="#id1" title="本標題的永久連結">¶</a></h1>
<p>訪問請求類別提供物件導向表示法來呈現來自客戶端（如瀏覽器）的 HTTP 請求。
它繼承並可以存取任何來自 <a class="reference internal" href="request.html"><span class="doc">Request</span></a> 和 <a class="reference internal" href="message.html"><span class="doc">Message</span></a> 的方法 ，除此之外，也可使用下列方法。</p>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><a class="reference internal" href="#id3" id="id10">存取請求</a></li>
<li><a class="reference internal" href="#id4" id="id11">判斷請求的型態</a></li>
<li><a class="reference internal" href="#id5" id="id12">檢索輸入</a></li>
<li><a class="reference internal" href="#id6" id="id13">檢索標頭</a></li>
<li><a class="reference internal" href="#url" id="id14">URL 請求</a></li>
<li><a class="reference internal" href="#id7" id="id15">已上傳的檔案</a></li>
<li><a class="reference internal" href="#id8" id="id16">內容協商</a><ul>
<li><a class="reference internal" href="#id9" id="id17">類別參考</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id10">存取請求</a><a class="headerlink" href="#id3" title="本標題的永久連結">¶</a></h2>
<p>如果當前類別是 <code class="docutils literal notranslate"><span class="pre">CodeIgniter\Controller</span></code> 的子類別，並且可以作為類別屬性來訪問，則該請求類別的實體以下提供給你:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">CodeIgniter\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">UserController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">isAJAX</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// ...</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>如果你不在控制器內，但仍需存取應用程式的訪問物件，則你可透過 <a class="reference internal" href="../concepts/services.html"><span class="doc">Services class</span></a> 獲取該物件的副本:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span> <span class="o">=</span> <span class="nx">\Config\Services</span><span class="o">::</span><span class="na">request</span><span class="p">();</span>
</pre></div>
</div>
<p>但是，如果該類別不是控制器，則最好將請求作為依賴傳入，如此你可將其作為類別屬性來保存:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">CodeIgniter\HTTP\RequestInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SomeClass</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$request</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">RequestInterface</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span> <span class="o">=</span> <span class="nv">$request</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$someClass</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SomeClass</span><span class="p">(</span><span class="nx">\Config\Services</span><span class="o">::</span><span class="na">request</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id11">判斷請求的型態</a><a class="headerlink" href="#id4" title="本標題的永久連結">¶</a></h2>
<p>一個請求有可多種的型態，包括 AJAX 請求或者來自命令列的請求。你可以透過 <code class="docutils literal notranslate"><span class="pre">isAJAX()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">isCLI()</span></code> 方法來判斷其型態:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">// Check for AJAX request.</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">isAJAX</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// Check for CLI Request</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">isCLI</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">isAJAX()</span></code> 方法取決於 <code class="docutils literal notranslate"><span class="pre">X-Requested-With</span></code> 標頭，
在某些情況下，該標頭預設不會是通過 JavaScript（即 Fetch）在 XHR 請求中發送的。
有關避免此問題的方法，請查閱 <a class="reference internal" href="../general/ajax.html"><span class="doc">AJAX Requests</span></a>。</p>
</div>
<p>你可以透過 <code class="docutils literal notranslate"><span class="pre">method()</span></code> 方法來檢查該請求代表何種 HTTP 方法:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">// Returns &#39;post&#39;</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getMethod</span><span class="p">();</span>
</pre></div>
</div>
<p>在預設情況下，此方法會回傳一個小寫字串(即「get」，「post」，等等)。你可以透過將此呼叫放入 <code class="docutils literal notranslate"><span class="pre">str_to_upper()</span></code> 將回傳值轉為大寫字串:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">// Returns &#39;GET&#39;</span>
<span class="nv">$method</span> <span class="o">=</span> <span class="nx">str_to_upper</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getMethod</span><span class="p">());</span>
</pre></div>
</div>
<p>你也可以透過 <code class="docutils literal notranslate"><span class="pre">isSecure()</span></code> 方法來檢查該請求是否來自 HTTPS 連線:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">isSecure</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">force_https</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id12">檢索輸入</a><a class="headerlink" href="#id5" title="本標題的永久連結">¶</a></h2>
<p>你可以透過請求物件中的 $_SERVER，$_GET，$_POST，和 $_ENV 來檢索輸入，資料不會被自動過濾，並且會回傳請求中傳入的原始輸入資料。
相較於直接存取它們（如 $_POST[『something』]），透過下列內建方法存取最大的好處是如果該資料不存在，則會回傳 null ，並且可以過濾數據。這使你可以更方便地使用這些資料，而不用在每次使用前都需要測試它們是否存在。
換句話說，在正在情況下你有可能會有下列程式碼:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$something</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="k">null</span><span class="p">;</span>
</pre></div>
</div>
<p>透過 CodeIgniter 的內建方法，你可以簡單地這樣做:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$something</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">getVar()</span></code> 方法會從 $_REQUEST 中拉取並回傳任何來自於 $_GET， $POST，或 $_COOKIE 的資料。
雖然如此作法很方便，但你通常會需要使用更具體的方法，例如:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="sb">``</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getGet</span><span class="p">()</span><span class="sb">``</span>
<span class="o">*</span> <span class="sb">``</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPost</span><span class="p">()</span><span class="sb">``</span>
<span class="o">*</span> <span class="sb">``</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getServer</span><span class="p">()</span><span class="sb">``</span>
<span class="o">*</span> <span class="sb">``</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getCookie</span><span class="p">()</span><span class="sb">``</span>
</pre></div>
</div>
<p>此外，以下提供一些實用的方法用於檢索 $_GET 或 $_POST 中的資訊，並且可以讓你保有選擇檢索順序的能力:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="sb">``</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPostGet</span><span class="p">()</span><span class="sb">``</span> <span class="o">-</span> <span class="nx">checks</span> <span class="nv">$_POST</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">then</span> <span class="nv">$_GET</span>
<span class="o">*</span> <span class="sb">``</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getGetPost</span><span class="p">()</span><span class="sb">``</span> <span class="o">-</span> <span class="nx">checks</span> <span class="nv">$_GET</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">then</span> <span class="nv">$_POST</span>
</pre></div>
</div>
<p><strong>獲取 JSON 資料</strong></p>
<p>你可以使用 <code class="docutils literal notranslate"><span class="pre">getJSON()</span></code> 方法來獲取 php://input 中以 JSON 串流表示的內容。</p>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">這無法檢查傳入的資料是否為合法的 JSON，在使用此方法前，你應該要確保傳入的資料是 JSON。</p>
</div>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$json</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getJSON</span><span class="p">();</span>
</pre></div>
</div>
<p>在預設情況下，這會將 JSON 資料中的任何物件作為物件回傳。如果你想要將其轉為關聯陣列，則將 <code class="docutils literal notranslate"><span class="pre">true</span></code> 作為第一個參數傳入。</p>
<p>第二個和第三個參數對應到的是 <a class="reference external" href="https://www.php.net/manual/en/function.json-decode.php">json_decode</a> PHP 函數中的 <code class="docutils literal notranslate"><span class="pre">depth</span></code> 和 <code class="docutils literal notranslate"><span class="pre">options</span></code> 引數。</p>
<p>如果傳入的請求中的 <code class="docutils literal notranslate"><span class="pre">CONTENT_TYPE</span></code> 標頭被設為 「application/json」，則你也可以使用 <code class="docutils literal notranslate"><span class="pre">getVar()</span></code> 來獲取 JSON 串流。
在這情況下使用 <code class="docutils literal notranslate"><span class="pre">getVar()</span></code> 總是會回傳物件。</p>
<p><strong>獲取 JSON 中特定資料</strong></p>
<p>你可以透過將你想要的資料名稱作為變數傳傳入 <code class="docutils literal notranslate"><span class="pre">getVar()</span></code> 中來從 JSON 串流中獲取特定的資料。
或者你可以使用「點」符號來獲取 JSON 中那些不是根等級的資料。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">//With a request body of:</span>
<span class="p">{</span>
    <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="s2">&quot;fizz&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;buzz&quot;</span><span class="o">:</span> <span class="s2">&quot;baz&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>
<span class="c1">//$data = &quot;bar&quot;</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="s1">&#39;fizz.buzz&#39;</span><span class="p">);</span>
<span class="c1">//$data = &quot;baz&quot;</span>
</pre></div>
</div>
<p>如果你想要的結果是一個關聯陣列而不是物件，則你可以使用 <code class="docutils literal notranslate"><span class="pre">getJsonVar()</span></code> 並且將 <code class="docutils literal notranslate"><span class="pre">true</span></code> 作為第二個參數傳入。
此函數在你不能保證傳入的請求有正確的 <code class="docutils literal notranslate"><span class="pre">CONTENT_TYPE</span></code> 標頭時，仍可以使用。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">//With the same request as above</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getJsonVar</span><span class="p">(</span><span class="s1">&#39;fizz&#39;</span><span class="p">);</span>
<span class="c1">//$data-&gt;buzz = &quot;baz&quot;</span>

<span class="nv">$data</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getJsonVar</span><span class="p">(</span><span class="s1">&#39;fizz&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="c1">//$data = [&quot;buzz&quot; =&gt; &quot;baz&quot;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">有關更多「點」符號的資訊，請查閱 <code class="docutils literal notranslate"><span class="pre">Array</span></code> 輔助函數中的 <code class="docutils literal notranslate"><span class="pre">dot_array_search()</span></code>。</p>
</div>
<p><strong>檢索原始資料（PUT，PATCH，DELETE）</strong></p>
<p>最後，你可以透過 <code class="docutils literal notranslate"><span class="pre">getRawInput()</span></code> 來獲得 php://input 中內容的原始串流:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getRawInput</span><span class="p">();</span>
</pre></div>
</div>
<p>以下寫法可以檢索資料並且將其轉成陣列。例如:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getRawInput</span><span class="p">());</span>

<span class="p">[</span>
    <span class="s1">&#39;Param1&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Value1&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Param2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Value2&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>過濾輸入資料</strong></p>
<p>為了維持你的應用程式的安全，你將希望過濾所有你要存取的輸入。你可以將要使用的過濾器型態作為第二個參數傳入這些方法。
原生的 <code class="docutils literal notranslate"><span class="pre">filter_var()</span></code> 函數可以被用來過濾。請前往查閱 PHP 手冊中的 <a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">valid
filter types</a> 列表。</p>
<p>過濾一個 POST 變數會看起來像這樣:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$email</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nx">FILTER_SANITIZE_EMAIL</span><span class="p">);</span>
</pre></div>
</div>
<p>除了 <code class="docutils literal notranslate"><span class="pre">getJSON()</span></code> 方法之外，上述所有提到的方法皆可以將過濾器型態作為第二個參數傳入。</p>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id13">檢索標頭</a><a class="headerlink" href="#id6" title="本標題的永久連結">¶</a></h2>
<p>你可以透過 <code class="docutils literal notranslate"><span class="pre">headers()</span></code> 方法來存取任何和請求一起送過來的標頭。此方法會回傳包含所有標頭的陣列，此陣列的鍵為標頭的名稱，而值為
<code class="docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Header</span></code> 的一個實體:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nb">var_dump</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">headers</span><span class="p">());</span>

<span class="p">[</span>
    <span class="s1">&#39;Host&#39;</span>          <span class="o">=&gt;</span> <span class="nx">CodeIgniter\HTTP\Header</span><span class="p">,</span>
    <span class="s1">&#39;Cache-Control&#39;</span> <span class="o">=&gt;</span> <span class="nx">CodeIgniter\HTTP\Header</span><span class="p">,</span>
    <span class="s1">&#39;Accept&#39;</span>        <span class="o">=&gt;</span> <span class="nx">CodeIgniter\HTTP\Header</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>如果你只需要單一標頭，你可以將標頭名稱傳入 <code class="docutils literal notranslate"><span class="pre">header()</span></code> 方法中。
如果存在的話，這會以名稱不區分大小寫的方式攫取特定的標頭物件。反之，它會回傳 <code class="docutils literal notranslate"><span class="pre">null</span></code>:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">// these are all equivalent</span>
<span class="nv">$host</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">header</span><span class="p">(</span><span class="s1">&#39;host&#39;</span><span class="p">);</span>
<span class="nv">$host</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">header</span><span class="p">(</span><span class="s1">&#39;Host&#39;</span><span class="p">);</span>
<span class="nv">$host</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">header</span><span class="p">(</span><span class="s1">&#39;HOST&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>你總是可以使用 <code class="docutils literal notranslate"><span class="pre">hasHeader()</span></code> 來檢查這個請求中的特定標頭是否存在:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">hasHeader</span><span class="p">(</span><span class="s1">&#39;DNT&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Don&#39;t track something...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>如果你需要標頭所有的值以一行字串表示，可以使用 <code class="docutils literal notranslate"><span class="pre">getHeaderLine()</span></code> 方法:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="c1">// Accept-Encoding: gzip, deflate, sdch</span>
<span class="k">echo</span> <span class="s1">&#39;Accept-Encoding: &#39;</span><span class="o">.</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getHeaderLine</span><span class="p">(</span><span class="s1">&#39;accept-encoding&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果你需要整個標頭，並且希望名稱和值在同一個字串中，只需將標頭轉換成字串:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">echo</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$header</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="url">
<h2><a class="toc-backref" href="#id14">URL 請求</a><a class="headerlink" href="#url" title="本標題的永久連結">¶</a></h2>
<p>你可以通過表示此請求的當前URI的 <a class="reference internal" href="../libraries/uri.html"><span class="doc">URI</span></a> 物件的 <code class="docutils literal notranslate"><span class="pre">$request-&gt;uri</span></code> 屬性來檢索。
你可以將此物件轉換成字串來獲取當前請求的完整 URL:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$uri</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">;</span>
</pre></div>
</div>
<p>此物件讓你完全有能力從該請求中自行獲取任何部分:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">;</span>

<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getScheme</span><span class="p">();</span>         <span class="c1">// http</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getAuthority</span><span class="p">();</span>      <span class="c1">// snoopy:password@example.com:88</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getUserInfo</span><span class="p">();</span>       <span class="c1">// snoopy:password</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getHost</span><span class="p">();</span>           <span class="c1">// example.com</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getPort</span><span class="p">();</span>           <span class="c1">// 88</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getPath</span><span class="p">();</span>           <span class="c1">// /path/to/page</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">();</span>          <span class="c1">// foo=bar&amp;bar=baz</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getSegments</span><span class="p">();</span>       <span class="c1">// [&#39;path&#39;, &#39;to&#39;, &#39;page&#39;]</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getSegment</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>       <span class="c1">// &#39;path&#39;</span>
<span class="k">echo</span> <span class="nv">$uri</span><span class="o">-&gt;</span><span class="na">getTotalSegments</span><span class="p">();</span>  <span class="c1">// 3</span>
</pre></div>
</div>
<p>你可以對當前的 URI 字串（相對於你的 baseURL 的路徑）使用 <code class="docutils literal notranslate"><span class="pre">getPath()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">setPath()</span></code> 方法。
要注意的是，在 <code class="docutils literal notranslate"><span class="pre">IncomingRequest</span></code> 的共享實體中的這個相對路徑會被 <a class="reference internal" href="../helpers/url_helper.html"><span class="doc">URL Helper</span></a> 函數使用，所以這是一個「欺騙」用於測試的請求的好方法。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyMenuTest</span> <span class="k">extends</span> <span class="nx">CIUnitTestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testActiveLinkUsesCurrentUrl</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">service</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">setPath</span><span class="p">(</span><span class="s1">&#39;users/list&#39;</span><span class="p">);</span>
        <span class="nv">$menu</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyMenu</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="s1">&#39;users/list&#39;</span><span class="p">,</span> <span class="nv">$menu</span><span class="o">-&gt;</span><span class="na">getActiveLink</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id15">已上傳的檔案</a><a class="headerlink" href="#id7" title="本標題的永久連結">¶</a></h2>
<p>所有已上傳的檔案的資訊都可透過 <code class="docutils literal notranslate"><span class="pre">$request-&gt;getFiles()</span></code> 取回，並回傳一個
<a class="reference internal" href="../libraries/uploaded_files.html"><span class="doc">FileCollection</span></a> 實體。這有助於減少操作已上傳檔案的麻煩，
並且使用了最佳實踐來最小化所有安全性風險。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$files</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getFiles</span><span class="p">();</span>

<span class="c1">// Grab the file by name given in HTML form</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$files</span><span class="o">-&gt;</span><span class="na">hasFile</span><span class="p">(</span><span class="s1">&#39;uploadedFile&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$file</span> <span class="o">=</span> <span class="nv">$files</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;uploadedfile&#39;</span><span class="p">);</span>

    <span class="c1">// Generate a new secure name</span>
    <span class="nv">$name</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getRandomName</span><span class="p">();</span>

    <span class="c1">// Move the file to it&#39;s new home</span>
    <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">move</span><span class="p">(</span><span class="s1">&#39;/path/to/dir&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>

    <span class="k">echo</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getSize</span><span class="p">(</span><span class="s1">&#39;mb&#39;</span><span class="p">);</span> <span class="c1">// 1.23</span>
    <span class="k">echo</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getExtension</span><span class="p">();</span> <span class="c1">// jpg</span>
    <span class="k">echo</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">();</span> <span class="c1">// image/jpg</span>
<span class="p">}</span>
</pre></div>
</div>
<p>你可以以基於 HTML 檔案輸入給予的檔案名稱取回一個單獨上傳的檔案:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$file</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getFile</span><span class="p">(</span><span class="s1">&#39;uploadedfile&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>你可以以基於 HTML 檔案輸入給予的檔案名稱取回一個作為多個檔案上傳的一部分已上傳的相同名稱的檔案陣列:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$files</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getFileMultiple</span><span class="p">(</span><span class="s1">&#39;uploadedfile&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h2><a class="toc-backref" href="#id16">內容協商</a><a class="headerlink" href="#id8" title="本標題的永久連結">¶</a></h2>
<p>你可以透過請求 <code class="docutils literal notranslate"><span class="pre">negotiate()</span></code> 方法輕鬆的更改內容樣式:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$language</span>    <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">negotiate</span><span class="p">(</span><span class="s1">&#39;language&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;en-US&#39;</span><span class="p">,</span> <span class="s1">&#39;en-GB&#39;</span><span class="p">,</span> <span class="s1">&#39;fr&#39;</span><span class="p">,</span> <span class="s1">&#39;es-mx&#39;</span><span class="p">]);</span>
<span class="nv">$imageType</span>   <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">negotiate</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span> <span class="s1">&#39;image/jpg&#39;</span><span class="p">]);</span>
<span class="nv">$charset</span>     <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">negotiate</span><span class="p">(</span><span class="s1">&#39;charset&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span> <span class="s1">&#39;UTF-16&#39;</span><span class="p">]);</span>
<span class="nv">$contentType</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">negotiate</span><span class="p">(</span><span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;text/html&#39;</span><span class="p">,</span> <span class="s1">&#39;text/xml&#39;</span><span class="p">]);</span>
<span class="nv">$encoding</span>    <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">negotiate</span><span class="p">(</span><span class="s1">&#39;encoding&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span> <span class="s1">&#39;compress&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>查看 <a class="reference internal" href="content_negotiation.html"><span class="doc">內容協商</span></a> 以了解更多細節。</p>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id17">類別參考</a><a class="headerlink" href="#id9" title="本標題的永久連結">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">除了條列在這裡的方法，此類別也繼承了來自
<a class="reference internal" href="request.html"><span class="doc">Request 類別</span></a> 與 <a class="reference internal" href="message.html"><span class="doc">Message 類別</span></a> 的方法。</p>
</div>
<p>由父類別提供的可用方法有:</p>
<ul class="simple">
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::getIPAddress()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::isValidIP()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::getMethod()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::setMethod()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::getServer()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::getEnv()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::setGlobal()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Request::fetchGlobal()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::getBody()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::setBody()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::appendBody()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::populateHeaders()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::headers()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::header()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::hasHeader()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::getHeaderLine()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::setHeader()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::removeHeader()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::appendHeader()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::prependHeader()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::getProtocolVersion()</span></code></li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CodeIgniter\HTTP\Message::setProtocolVersion()</span></code></li>
</ul>
<dl class="class">
<dt>
<code class="descname">CodeIgniter\HTTP\IncomingRequest</code></dt>
<dd><dl class="method">
<dt id="isCLI">
<code class="descname">isCLI</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#isCLI" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">要是請求是由命令列發起的則回傳 true，否則回傳 False。</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="isAJAX">
<code class="descname">isAJAX</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#isAJAX" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">要是請求是一個 AJAX 請求則回傳 true，否則回傳 False。</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="isSecure">
<code class="descname">isSecure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#isSecure" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">要是請求是一個 HTML 請求則回傳 true，否則回傳 False。</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="getVar">
<code class="descname">getVar</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getVar" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>string</em>) – 欲找尋的變數/值的名稱。</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">要是沒有提供參數則回傳 $_REQUEST，否則回傳找到的 REQUEST 值，沒找到則回傳 null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed|null</p>
</td>
</tr>
</tbody>
</table>
<p>第一個參數會包含你在尋找的 REQUSET 項目的名稱:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="s1">&#39;some_data&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>要是你試圖取回的項目不存在則此方法會回傳 null。</p>
<p>第二個可選參屬允許你透過 PHP 篩選運行資料。傳入想要的過濾器類型作為第二個參數:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="s1">&#39;some_data&#39;</span><span class="p">,</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
</pre></div>
</div>
<p>回傳一個由所有 POST 項目組成的陣列不須呼叫任何參數。</p>
<p>如果想要回傳所有的 POST 項目並且將它們傳過過濾器，將第一個參數設為 null 並將第二個參數設為你想使用的過濾器。:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
<span class="c1">// returns all POST items with string sanitation</span>
</pre></div>
</div>
<p>如果想要回傳一個由多個 POST 參數組成的陣列，將所有必要的鍵以陣列傳入:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">([</span><span class="s1">&#39;field1&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<p>相同的規則也可以應用在這裡，如果想要取回過濾器篩選後的參數，將第二個參數設為想要使用的過濾器類型:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getVar</span><span class="p">([</span><span class="s1">&#39;field1&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">],</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="getGet">
<code class="descname">getGet</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getGet" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>string</em>) – 欲找尋的變數/值的名稱。</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器種類。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">要是沒有提供參數則回傳 $_GET，否則回傳找到的 GET 值，沒找到則回傳 null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed|null</p>
</td>
</tr>
</tbody>
</table>
<p>此方法與 <code class="docutils literal notranslate"><span class="pre">getVar()</span></code> 是完全相同的，差別在此方法是抓取 GET 資料。</p>
</dd></dl>

<dl class="method">
<dt id="getPost">
<code class="descname">getPost</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getPost" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>string</em>) – 欲找尋的變數/值的名稱。</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">要是沒有提供參數則回傳 $_POST，否則回傳找到的 POST 值，沒找到則回傳 null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed|null</p>
</td>
</tr>
</tbody>
</table>
<p>此方法與 <code class="docutils literal notranslate"><span class="pre">getVar()</span></code> 是完全相同的，差別在此方法是抓取 POST 資料。</p>
</dd></dl>

<dl class="method">
<dt id="getPostGet">
<code class="descname">getPostGet</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getPostGet" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>string</em>) – 欲找尋的變數/值的名稱。</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">要是沒有提供參數則回傳 $_POST，否則回傳找到的 POST 值，沒找到則回傳 null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed|null</p>
</td>
</tr>
</tbody>
</table>
<p>此方法在執行上和 <code class="docutils literal notranslate"><span class="pre">getPost()</span></code> 與 <code class="docutils literal notranslate"><span class="pre">getGet()</span></code> 大同小異，差別在於此方法結合了兩者。
此方法會搜索 POST 與 GET 串流來取得資料，先搜尋過 POST 後，再搜尋 GET</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPostGet</span><span class="p">(</span><span class="s1">&#39;field1&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="getGetPost">
<code class="descname">getGetPost</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getGetPost" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>string</em>) – 欲找尋的變數/值的名稱。</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">要是沒有提供參數則回傳 $_POST，否則回傳找到的 POST 值，沒找到則回傳 null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed|null</p>
</td>
</tr>
</tbody>
</table>
<p>此方法在執行上和 <code class="docutils literal notranslate"><span class="pre">getPost()</span></code> 與 <code class="docutils literal notranslate"><span class="pre">getGet()</span></code> 大同小異，差別在於此方法結合了兩者。
此方法會搜索 POST 與 GET 串流來取得資料，先搜尋過 GET 後，再搜尋 POST</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getGetPost</span><span class="p">(</span><span class="s1">&#39;field1&#39;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">getCookie</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>mixed</em>) – COOKIE 名稱</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">要是沒有提供參數則回傳 $_COOKIE，否則回傳找到的 COOKIE 值，沒找到則回傳 null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>此方法和 <code class="docutils literal notranslate"><span class="pre">getPost()</span></code> 與 <code class="docutils literal notranslate"><span class="pre">getGet()</span></code> 是完全相同的，差別在此方法是抓取 cookie 資料。:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getCookie</span><span class="p">(</span><span class="s1">&#39;some_cookie&#39;</span><span class="p">);</span>
<span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getCookie</span><span class="p">(</span><span class="s1">&#39;some_cookie&#39;</span><span class="p">,</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">);</span> <span class="c1">// with filter</span>
</pre></div>
</div>
<p>如果想要回傳一個由多個 cookie 值組成的陣列，將所有必要的鍵以陣列傳入:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getCookie</span><span class="p">([</span><span class="s1">&#39;some_cookie&#39;</span><span class="p">,</span> <span class="s1">&#39;some_cookie2&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">不同於 <a class="reference internal" href="../helpers/cookie_helper.html"><span class="doc">Cookie Helper</span></a>
函數 <a class="reference internal" href="../helpers/cookie_helper.html#get_cookie" title="get_cookie"><code class="xref php php-func docutils literal notranslate"><span class="pre">get_cookie()</span></code></a>，此方法並不會預先設定你的 <code class="docutils literal notranslate"><span class="pre">$config['cookie_prefix']</span></code> 值。</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">getServer</code><span class="sig-paren">(</span><span class="optional">[</span><em>$index = null</em><span class="optional">[</span>, <em>$filter = null</em><span class="optional">[</span>, <em>$flags = null</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$index</strong> (<em>mixed</em>) – 值的名稱</li>
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
<li><strong>$flags</strong> (<em>int</em>) – 要使用的旗標。旗標清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.flags.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">回傳找到的 $_SERVER 項目的值，沒找到則回傳null</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>此方法和 <code class="docutils literal notranslate"><span class="pre">getPost()</span></code> 與 <code class="docutils literal notranslate"><span class="pre">getGet()</span></code> 與 <code class="docutils literal notranslate"><span class="pre">getCookie()</span></code> 是完全相同的，差別在此方法是抓取 getServer 資料 (<code class="docutils literal notranslate"><span class="pre">$_SERVER</span></code>):</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getServer</span><span class="p">(</span><span class="s1">&#39;some_data&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>如果想要回傳一個由多個 <code class="docutils literal notranslate"><span class="pre">$_SERVER</span></code> 值組成的陣列，將所有必要的鍵值以陣列傳入。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getServer</span><span class="p">([</span><span class="s1">&#39;SERVER_PROTOCOL&#39;</span><span class="p">,</span> <span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">]);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="getUserAgent">
<code class="descname">getUserAgent</code><span class="sig-paren">(</span><span class="optional">[</span><em>$filter = null</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getUserAgent" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$filter</strong> (<em>int</em>) – 要使用的過濾器類型。過濾器類型清單請前往
<a class="reference external" href="https://www.php.net/manual/en/filter.filters.php">這裡</a>。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">回傳在 SERVER 資料找到的 User Agent 字串，沒找到則回傳null。</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>此方法回傳在 SERVER 資料中的 User Agent 字串:</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getUserAgent</span><span class="p">();</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="getPath">
<code class="descname">getPath</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getPath" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">目前與 <code class="docutils literal notranslate"><span class="pre">$_SERVER['SCRIPT_NAME']</span></code> 相關的 URI 路徑</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>這是測定」當前 URI」最安全的方法，因為 <code class="docutils literal notranslate"><span class="pre">IncomingRequest::$uri</span></code> 可能不會意識到對於基本 URL 完整的應用程式組態設定。</p>
</dd></dl>

<dl class="method">
<dt id="setPath">
<code class="descname">setPath</code><span class="sig-paren">(</span><em>$path</em><span class="sig-paren">)</span><a class="headerlink" href="#setPath" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$path</strong> (<em>string</em>) – 要被當成當前 URI 使用的相關路徑</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">這個傳入的請求</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">IncomingRequest</p>
</td>
</tr>
</tbody>
</table>
<p>通常只用在測試，此方法允許你為當前的請求設定相關路徑值，而不是依賴 URI 檢測。這同時也會以新的路徑更新潛在的 <code class="docutils literal notranslate"><span class="pre">URI</span></code> 實體。</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="content_negotiation.html" class="btn btn-neutral float-right" title="內容協商" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="request.html" class="btn btn-neutral float-left" title="Request 類別" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2021 CodeIgniter 基金會 | 國立高雄師範大學軟體工程與管理學系 SDPM 實驗室譯製 
      <span class="lastupdated">
        最後更新於 2021年12月25日。
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>