

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-TW" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-TW" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>產生查詢結果 &mdash; CodeIgniter4 4.1.5 說明文件</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/js/citheme.js"></script>
        <script type="text/javascript" src="../_static/js/carbon.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/citheme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="next" title="查詢輔助函數" href="helpers.html" />
    <link rel="prev" title="執行查詢" href="queries.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #DD4814" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/ci-logo-text.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">歡迎加入 CodeIgniter4</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../intro/index.html">歡迎加入 CodeIgniter4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/requirements.html">系統需求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/credits.html">貢獻</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intro/psr.html">PSR 規範</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">安裝指引</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_composer.html">Composer 安裝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/installing_manual.html">手動安裝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/running.html">運作你的應用程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/upgrading.html">從舊版升級</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/troubleshooting.html">故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/repositories.html">CodeIgniter 儲存庫</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">建構第一個應用程式</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">靜態頁面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">新聞頁面</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">建立新聞</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">結論</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/index.html">CodeIgniter4 概觀</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/structure.html">應用程式結構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/mvc.html">模型、視圖與控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/autoloader.html">自動載入檔案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/services.html">服務（services）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/factories.html">工廠模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/http.html">處裡 HTTP 請求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/security.html">安全指南</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">一般主題</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/configuration.html">組態設定檔案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">CodeIgniter URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">全域函數與常數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/logging.html">記錄日誌資訊</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">錯誤處理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">網頁快取</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ajax.html">AJAX 請求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/modules.html">程式碼模組</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">管理你的應用程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">處理多種環境</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../incoming/index.html">控制器與路由</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../incoming/controllers.html">控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/routing.html">URI 路由設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/filters.html">控制器過濾器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/message.html">HTTP 訊息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/request.html">Request 類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/incomingrequest.html">訪問請求</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/content_negotiation.html">內容協商</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/methodspoofing.html">HTTP 類型偽裝</a></li>
<li class="toctree-l2"><a class="reference internal" href="../incoming/restful.html">處理 RESTful 請求資源</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../outgoing/index.html">建構響應</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/views.html">視圖</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_cells.html">視圖單元</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_renderer.html">視圖渲染</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_layouts.html">視圖布局</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/view_parser.html">視圖解釋器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/table.html">HTML 表格類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/response.html">HTTP 響應</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/api_responses.html">API 響應特性</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/localization.html">本土化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outgoing/alternative_php.html">用於視圖檔案的 PHP 語法</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">資料庫操作</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examples.html">快速入門: 範例程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">資料庫組態設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="connecting.html">連接你的資料庫</a></li>
<li class="toctree-l2"><a class="reference internal" href="queries.html">執行查詢</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">產生查詢結果</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">查詢輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="query_builder.html">查詢生成器類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">交易</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">詮釋資料</a></li>
<li class="toctree-l2"><a class="reference internal" href="call_function.html">自訂函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html">資料庫事件</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">資料庫工具</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../models/index.html">資料模型化</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../models/model.html">使用 CodeIgniter 的模型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/entities.html">使用實體類別</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dbmgmt/index.html">資料庫管理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/forge.html">資料庫操控與資料庫建構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/migration.html">資料庫遷移</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dbmgmt/seeds.html">資料庫填充</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">程式庫參考</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">Caching Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cookies.html">Cookies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/curlrequest.html">CURLRequest Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Email Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">加密服務</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/files.html#file-collections">File Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/honeypot.html">誘捕系統類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/images.html">Image Manipulation Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">Pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/publisher.html">Publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">安全性類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">Session Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/throttler.html">Throttler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/time.html">Times and Dates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">Typography</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uploaded_files.html">Working with Uploaded Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">Working with URIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">User Agent Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/validation.html">Validation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">輔助函數</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../helpers/array_helper.html">陣列輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/cookie_helper.html">Cookie 輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/date_helper.html">日期輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/filesystem_helper.html">檔案系統輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/form_helper.html">表單輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/html_helper.html">HTML Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/inflector_helper.html">Inflector 輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/number_helper.html">Number 輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/security_helper.html">安全性輔助函數</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/test_helper.html">Test Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/text_helper.html">Text Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/url_helper.html">URL Helper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/xml_helper.html">XML 輔助函數</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">測試</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../testing/overview.html">入門</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/database.html">資料庫測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/fabricator.html">Generating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/controllers.html">控制器測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/feature.html">HTTP 特性測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/response.html">Testing Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/benchmark.html">基準測試</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/debugging.html">偵錯與除錯應用程式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing/mocking.html">Mocking</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">使用命令列介面</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli.html">透過命命列運作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_commands.html">自訂命令列介面指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_generators.html">CLI Generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_library.html">命令列程式庫</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/cli_request.html">CLI 請求類別</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">擴充 CodeIgniter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extending/core_classes.html">建立核心系統類別</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/common.html">替換常用功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/events.html">事件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/basecontroller.html">擴充控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/authentication.html">認證方式</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending/contributing.html">為 CodeIgniter 貢獻</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translation/index.html">CodeIgniter4 文件翻譯</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../translation/glossary.html">詞彙對照表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../translation/members.html">翻譯貢獻者</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CodeIgniter4</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">資料庫操作</a> &raquo;</li>
        
      <li>產生查詢結果</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>產生查詢結果<a class="headerlink" href="#id1" title="本標題的永久連結">¶</a></h1>
<p>有幾種方法可以產生查詢結果：</p>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><a class="reference internal" href="#id3" id="id8">結果陣列</a></li>
<li><a class="reference internal" href="#id4" id="id9">結果列</a></li>
<li><a class="reference internal" href="#id5" id="id10">客製化查詢結果</a></li>
<li><a class="reference internal" href="#id6" id="id11">結果輔助方法</a></li>
<li><a class="reference internal" href="#id7" id="id12">物件參考</a></li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id8">結果陣列</a><a class="headerlink" href="#id3" title="本標題的永久連結">¶</a></h2>
<p><strong>getResult()</strong></p>
<p>這個方法會將查詢結果以 <strong>物件</strong> 陣列或 <strong>空</strong> 陣列(查詢失敗時)回傳。
一般情況下可以使用foreach迴圈，參考以下範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getResult</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">body</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>上述方法的別名是 <code class="docutils literal notranslate"><span class="pre">getResultObject()</span></code> 。</p>
<p>如果你想要得到多重陣列的查詢結果，你可以在參數中傳送 『array』：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getResult</span><span class="p">(</span><span class="s1">&#39;array&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>上述方法的別名是 <code class="docutils literal notranslate"><span class="pre">getResultArray()</span></code> 。</p>
<p>你也可以傳送一個字串給 <code class="docutils literal notranslate"><span class="pre">getResult()</span></code> ，為每一個物件建立一個類別名稱。
which represents a class to instantiate for each result object</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM users;&quot;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getResult</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$user</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span> <span class="c1">// access attributes</span>
    <span class="k">echo</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">reverseName</span><span class="p">();</span> <span class="c1">// or methods defined on the &#39;User&#39; class</span>
<span class="p">}</span>
</pre></div>
</div>
<p>上述方法的別名是 <code class="docutils literal notranslate"><span class="pre">getCustomResultObject()</span></code> 。</p>
<p><strong>getResultArray()</strong></p>
<p>這個方法將會回傳純陣列或空陣列(查詢結果為空時)的查詢結果。
一般情況下可以使用foreach迴圈，參考以下範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getResultArray</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id9">結果列</a><a class="headerlink" href="#id4" title="本標題的永久連結">¶</a></h2>
<p><strong>getRow()</strong></p>
<p>這個方法會回傳單筆查詢結果。如果你查詢的資料不只一筆，它只會回傳第一筆資料。
查詢結果會以 <strong>物件</strong> 的方式回傳。參考以下範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getRow</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$row</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">body</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>如果你想要回傳特定的第幾筆資料，可以設定第一個參數為你想要的該筆資料：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getRow</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>你也可以傳入第二個參數，這個結果物件將被實體化為的類別名稱。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM users LIMIT 1;&quot;</span><span class="p">);</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getRow</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;User&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span> <span class="c1">// access attributes</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">reverse_name</span><span class="p">();</span> <span class="c1">// or methods defined on the &#39;User&#39; class</span>
</pre></div>
</div>
<p><strong>getRowArray()</strong></p>
<p>同等於上述 <code class="docutils literal notranslate"><span class="pre">row()</span></code> 方法，不同的是它回傳是陣列。參考以下範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getRowArray</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$row</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">];</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>如果你想要回傳特定的第幾筆資料，可以設定第一個參數為你想要的該筆資料：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getRowArray</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</pre></div>
</div>
<p>除此之外，你可以利用底下方式查詢到 前一筆/下一筆/第一筆/最後一筆 資料：</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getFirstRow()</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getLastRow()</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getNextRow()</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getPreviousRow()</span></code></div>
</div>
</div></blockquote>
<p>預設回傳值為物件，除非設定第一個參數為 「array」：</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getFirstRow('array')</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getLastRow('array')</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getNextRow('array')</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">$row</span> <span class="pre">=</span> <span class="pre">$query-&gt;getPreviousRow('array')</span></code></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">上述的所有方法都會將結果載入到記憶體(prefetching)中。使用 <code class="docutils literal notranslate"><span class="pre">getUnbufferedRow()</span></code> 處理大量的資料集。</p>
</div>
<p><strong>getUnbufferedRow()</strong></p>
<p>這個方法會回傳單筆查詢結果，但並不會像 <code class="docutils literal notranslate"><span class="pre">row()</span></code> 將所有查詢結果預載到記憶體中。
如果你的查詢結果超過一筆，它將回傳該筆資料並將內部資料指標移動到下一筆資料。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getUnbufferedRow</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">body</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>為了要與 MySQLi 一同使用，你可以將 MySQLi 回傳模式設定為 <code class="docutils literal notranslate"><span class="pre">MYSQLI_USE_RESULT</span></code> ，以節省最多的記憶體。通常我們不建議你使用這個模式，但在某些情況卻是有效的。例如，在大型的查詢後寫入 CSV 。如果改變了回傳模式，請自行注意相關的權衡。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$db</span><span class="o">-&gt;</span><span class="na">resultMode</span> <span class="o">=</span> <span class="nx">MYSQLI_USE_RESULT</span><span class="p">;</span> <span class="c1">// for unbuffered results</span>

<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="nv">$file</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\CodeIgniter\Files\File</span><span class="p">(</span><span class="nx">WRITEPATH</span><span class="o">.</span><span class="s1">&#39;data.csv&#39;</span><span class="p">);</span>

<span class="nv">$csv</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">openFile</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">);</span>

<span class="k">while</span> <span class="p">(</span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getUnbufferedRow</span><span class="p">(</span><span class="s1">&#39;array&#39;</span><span class="p">))</span>
<span class="p">{</span>
    <span class="nv">$csv</span><span class="o">-&gt;</span><span class="na">fputcsv</span><span class="p">(</span><span class="nv">$row</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$db</span><span class="o">-&gt;</span><span class="na">resultMode</span> <span class="o">=</span> <span class="nx">MYSQLI_STORE_RESULT</span><span class="p">;</span> <span class="c1">// return to default mode</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">使用 <code class="docutils literal notranslate"><span class="pre">MYSQLI_USE_RESULT</span></code> 時，若在同一連線上再進行後續呼叫，將會導致錯誤發生。請在所有回傳的紀錄被取走後或是呼叫 <code class="docutils literal notranslate"><span class="pre">freeResult()</span></code> 再進行後續呼叫。 <code class="docutils literal notranslate"><span class="pre">getNumRows()</span></code> 方法僅會回傳基於資料指標的當前位置的行數。MyISAM 資料表將會保持鎖定，直到所有回傳的紀錄被取走後或是呼叫 <code class="docutils literal notranslate"><span class="pre">freeResult()</span></code> 。</p>
</div>
<p>你可以選擇傳入 『object』 （預設）或 『array』 來指定回傳的資料型態：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getUnbufferedRow</span><span class="p">();</span>                 <span class="c1">// object</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getUnbufferedRow</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">);</span>     <span class="c1">// object</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getUnbufferedRow</span><span class="p">(</span><span class="s1">&#39;array&#39;</span><span class="p">);</span>      <span class="c1">// associative array</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id10">客製化查詢結果</a><a class="headerlink" href="#id5" title="本標題的永久連結">¶</a></h2>
<p>你可以將查詢結果以自定義類別的實體做回傳，而不是像 <code class="docutils literal notranslate"><span class="pre">getResult()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">getResultArray()</span></code> ，以stdClass或陣列的方式回傳。
如果類別沒有載入到記憶體中，Autoloader將會自動載入。
物件將會把資料庫中回傳的所有變數設定為屬性。
如果這些變數已經被宣告為非公開，那你應該要提供一個 <code class="docutils literal notranslate"><span class="pre">__set()</span></code> 的方法，讓它可以被設定。</p>
<p>範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$email</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$username</span><span class="p">;</span>

    <span class="k">protected</span> <span class="nv">$last_login</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">lastLogin</span><span class="p">(</span><span class="nv">$format</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lastLogin</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="nv">$format</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__set</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$name</span> <span class="o">===</span> <span class="s1">&#39;lastLogin&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lastLogin</span> <span class="o">=</span> <span class="nx">DateTime</span><span class="o">::</span><span class="na">createFromFormat</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__get</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$name</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$name</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>除了以下列出的兩個方法之外，這些方法(例如： <code class="docutils literal notranslate"><span class="pre">getFirstRow()</span></code>, <code class="docutils literal notranslate"><span class="pre">getLastRow()</span></code>,
<code class="docutils literal notranslate"><span class="pre">getNextRow()</span></code>, and <code class="docutils literal notranslate"><span class="pre">getPreviousRow()</span></code> )也可以使用類別名稱的方式做回傳查詢結果。</p>
<p><strong>getCustomResultObject()</strong></p>
<p>以類別的實體之陣列an array of instances of the class requested.，回傳所有查詢結果集。
唯一要傳入的參數是要做為類別實體的名稱class to instantiate.</p>
<p>範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="nv">$rows</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getCustomResultObject</span><span class="p">(</span><span class="s1">&#39;User&#39;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$rows</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">last_login</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>getCustomRowObject()</strong></p>
<p>從查詢結果中回傳單筆資料。第一個參數為要回傳的該筆資料，第二個參數為實體化的類別名稱。
The second parameter is the class name to instantiate.</p>
<p>範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">&quot;YOUR QUERY&quot;</span><span class="p">);</span>

<span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getCustomRowObject</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;User&#39;</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$row</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">email</span><span class="p">;</span>               <span class="c1">// access attributes</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">last_login</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span> <span class="c1">// access class methods</span>
<span class="p">}</span>
</pre></div>
</div>
<p>你也能以完全相同的方式，使用 <code class="docutils literal notranslate"><span class="pre">getRow()</span></code> 這個方法。</p>
<p>範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getCustomRowObject</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;User&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id11">結果輔助方法</a><a class="headerlink" href="#id6" title="本標題的永久連結">¶</a></h2>
<p><strong>getFieldCount()</strong></p>
<p>回傳查詢後的欄位數量。確保使用查詢結果物件來呼叫這個方法。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM my_table&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getFieldCount</span><span class="p">();</span>
</pre></div>
</div>
<p><strong>getFieldNames()</strong></p>
<p>回傳查詢後的欄位名稱陣列，確保使用查詢結果物件來呼叫這個方法。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM my_table&#39;</span><span class="p">);</span>

    <span class="k">echo</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getFieldNames</span><span class="p">();</span>
</pre></div>
</div>
<p><strong>getNumRows()</strong></p>
<p>查詢回傳的結果數量。確保使用查詢結果物件來呼叫這個方法。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM my_table&#39;</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getNumRows</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">由於 SQLite3 缺少回傳紀錄數量的方法，因此 CodeIgniter 將會獲取緩衝查詢結果紀錄，並回傳陣列的計數，但這個方法可能造成低效能。</p>
</div>
<p><strong>freeResult()</strong></p>
<p>它將會釋放查詢後的記憶體並且刪除資源ID。
通常PHP會在腳本執行結束後自動釋放記憶體。
但是，如果你是在特定腳本中運行大量資料的查詢，你可能需要在每次查詢都需要釋放記憶體，以減少記憶體的消耗。</p>
<p>範例：</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$thisdb</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;SELECT title FROM my_table&#39;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getResult</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">freeResult</span><span class="p">();</span> <span class="c1">// The $query result object will no longer be available</span>

<span class="nv">$query2</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;SELECT name FROM some_table&#39;</span><span class="p">);</span>

<span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query2</span><span class="o">-&gt;</span><span class="na">getRow</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$row</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
<span class="nv">$query2</span><span class="o">-&gt;</span><span class="na">freeResult</span><span class="p">();</span> <span class="c1">// The $query2 result object will no longer be available</span>
</pre></div>
</div>
<p><strong>dataSeek()</strong></p>
<p>這個方法是設定下一次查詢的索引。它只會與 <code class="docutils literal notranslate"><span class="pre">getUnbufferedRow()</span></code> 結合使用。</p>
<p>它容納一個正整數，預設為0，成功回傳TRUE；失敗回傳FALSE。</p>
<div class="highlight-html+php notranslate"><div class="highlight"><pre><span></span><span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s1">&#39;SELECT `field_name` FROM `table_name`&#39;</span><span class="p">);</span>
<span class="nv">$query</span><span class="o">-&gt;</span><span class="na">dataSeek</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// 忽略前5筆</span>
<span class="nv">$row</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">getUnbufferedRow</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">並不是所有的資料庫驅動都會支援此方法或回傳FALSE。例如：你不可能在PDO中使用此方法。</p>
</div>
</div>
<div class="section" id="id7">
<h2><a class="toc-backref" href="#id12">物件參考</a><a class="headerlink" href="#id7" title="本標題的永久連結">¶</a></h2>
<dl class="class">
<dt>
<code class="descname">CodeIgniter\Database\BaseResult</code></dt>
<dd><blockquote>
<div><dl class="method">
<dt id="getResult">
<code class="descname">getResult</code><span class="sig-paren">(</span><span class="optional">[</span><em>$type = 'object'</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getResult" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">含有請求結果的陣列</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">array</p>
</td>
</tr>
</tbody>
</table>
<p>為 <code class="docutils literal notranslate"><span class="pre">getResultArray()</span></code> 、 <code class="docutils literal notranslate"><span class="pre">getResultObject()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">getCustomResultObject()</span></code> 方法的包裝。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getResultArray">
<code class="descname">getResultArray</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getResultArray" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">含有請求結果的陣列</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
<p>將查詢結果以陣列的方式回傳，陣列中的每個列都是一個關聯陣列。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getResultObject">
<code class="descname">getResultObject</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getResultObject" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">含有請求結果的陣列</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
<p>將查詢結果以陣列的方式回傳，陣列中的每個列都是 <code class="docutils literal notranslate"><span class="pre">stdClass</span></code> 的物件。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getCustomResultObject">
<code class="descname">getCustomResultObject</code><span class="sig-paren">(</span><em>$class_name</em><span class="sig-paren">)</span><a class="headerlink" href="#getCustomResultObject" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$class_name</strong> (<em>string</em>) – 查詢結果列的類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">含有請求結果的陣列</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">array</p>
</td>
</tr>
</tbody>
</table>
<p>將查詢結果以陣列的方式回傳，陣列中的每個列都是所指定類別的實體。</p>
</dd></dl>

<dl class="method">
<dt id="getRow">
<code class="descname">getRow</code><span class="sig-paren">(</span><span class="optional">[</span><em>$n = 0</em><span class="optional">[</span>, <em>$type = 'object'</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$n</strong> (<em>int</em>) – 要回傳的查詢結果的索引</li>
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">請求的列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>為 <code class="docutils literal notranslate"><span class="pre">getRowArray()</span></code> 、 <code class="docutils literal notranslate"><span class="pre">getRowObject()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">getCustomRowObject()</span></code> 方法的包裝。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getUnbufferedRow">
<code class="descname">getUnbufferedRow</code><span class="sig-paren">(</span><span class="optional">[</span><em>$type = 'object'</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getUnbufferedRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">從查詢結果集合回傳下一筆的列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>取得下一筆查詢結果的列，並以請求的形式回傳。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getRowArray">
<code class="descname">getRowArray</code><span class="sig-paren">(</span><span class="optional">[</span><em>$n = 0</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getRowArray" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$n</strong> (<em>int</em>) – 要回傳的查詢結果的索引</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">請求的列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">array</p>
</td>
</tr>
</tbody>
</table>
<p>以關聯陣列的方式回傳請求的結果列。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getRowObject">
<code class="descname">getRowObject</code><span class="sig-paren">(</span><span class="optional">[</span><em>$n = 0</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getRowObject" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$n</strong> (<em>int</em>) – 要回傳的查詢結果的索引</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">請求的列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">stdClass</p>
</td>
</tr>
</tbody>
</table>
<p>以 <code class="docutils literal notranslate"><span class="pre">stdClass</span></code> 的物件方式回傳請求的結果列。</p>
<p>詳細用法: <a class="reference internal" href="#id3">結果陣列</a></p>
</dd></dl>

<dl class="method">
<dt id="getCustomRowObject">
<code class="descname">getCustomRowObject</code><span class="sig-paren">(</span><em>$n</em>, <em>$type</em><span class="sig-paren">)</span><a class="headerlink" href="#getCustomRowObject" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$n</strong> (<em>int</em>) – 要回傳的查詢結果的索引</li>
<li><strong>$class_name</strong> (<em>string</em>) – 查詢結果列的類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">請求的列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">$type</p>
</td>
</tr>
</tbody>
</table>
<p>以所請求類別的實體回傳請求的結果列。</p>
</dd></dl>

<dl class="method">
<dt id="dataSeek">
<code class="descname">dataSeek</code><span class="sig-paren">(</span><span class="optional">[</span><em>$n = 0</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#dataSeek" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$n</strong> (<em>int</em>) – 下一個要回傳的結果列的索引</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">TRUE 代表成功，FALSE 代表失敗</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">bool</p>
</td>
</tr>
</tbody>
</table>
<p>將內部結果列指針移動到所需要的偏移量。</p>
<p>詳細用法: <a class="reference internal" href="#id6">結果輔助方法</a></p>
</dd></dl>

<dl class="method">
<dt id="setRow">
<code class="descname">setRow</code><span class="sig-paren">(</span><em>$key</em><span class="optional">[</span>, <em>$value = NULL</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#setRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$key</strong> (<em>mixed</em>) – 欄位名稱或鍵值陣列</li>
<li><strong>$value</strong> (<em>mixed</em>) – 要分配給欄位的值， $key 是一個單一欄位的名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">void</p>
</td>
</tr>
</tbody>
</table>
<p>分配數值給特定的欄位</p>
</dd></dl>

<dl class="method">
<dt id="getNextRow">
<code class="descname">getNextRow</code><span class="sig-paren">(</span><span class="optional">[</span><em>$type = 'object'</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getNextRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">查詢結果集合的下一筆列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>回傳查詢結果集合的下一筆列</p>
</dd></dl>

<dl class="method">
<dt id="getPreviousRow">
<code class="descname">getPreviousRow</code><span class="sig-paren">(</span><span class="optional">[</span><em>$type = 'object'</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getPreviousRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">查詢結果集合的上一筆列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>回傳查詢結果集合的上一筆列</p>
</dd></dl>

<dl class="method">
<dt id="getFirstRow">
<code class="descname">getFirstRow</code><span class="sig-paren">(</span><span class="optional">[</span><em>$type = 'object'</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getFirstRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">查詢結果集合的第一筆列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>回傳查詢結果集合的第一筆列</p>
</dd></dl>

<dl class="method">
<dt id="getLastRow">
<code class="descname">getLastRow</code><span class="sig-paren">(</span><span class="optional">[</span><em>$type = 'object'</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#getLastRow" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">參數:</th><td class="field-body"><ul class="first simple">
<li><strong>$type</strong> (<em>string</em>) – 請求結果的類型 - 陣列、物件或類別名稱</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回:</th><td class="field-body"><p class="first">查詢結果集合的最後一筆列，如果不存在，則為 NULL</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body"><p class="first last">mixed</p>
</td>
</tr>
</tbody>
</table>
<p>回傳查詢結果集合的最後一筆列</p>
</dd></dl>

<dl class="method">
<dt id="getFieldCount">
<code class="descname">getFieldCount</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getFieldCount" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">查詢結果集合中欄位的數量</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
<p>回傳查詢結果集合中欄位的數量</p>
<p>詳細用法: <a class="reference internal" href="#id6">結果輔助方法</a></p>
</dd></dl>

</div></blockquote>
<dl class="method">
<dt id="getFieldNames">
<code class="descname">getFieldNames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getFieldNames" title="本定義的永久連結">¶</a></dt>
<dd><blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">returns:</th><td class="field-body">欄位名稱的陣列</td>
</tr>
<tr class="field-even field"><th class="field-name">rtype:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
<p>回傳查詢結果集合中欄位名稱的陣列</p>
</div></blockquote>
<dl class="method">
<dt id="getFieldData">
<code class="descname">getFieldData</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#getFieldData" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回:</th><td class="field-body">詮釋資料欄位的陣列</td>
</tr>
<tr class="field-even field"><th class="field-name">傳回型態:</th><td class="field-body">array</td>
</tr>
</tbody>
</table>
<p>產生包含詮釋資料欄位的 <code class="docutils literal notranslate"><span class="pre">stdClass</span></code> 物件陣列</p>
</dd></dl>

<dl class="method">
<dt id="freeResult">
<code class="descname">freeResult</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#freeResult" title="本定義的永久連結">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">傳回型態:</th><td class="field-body">void</td>
</tr>
</tbody>
</table>
<p>釋放查詢結果集合</p>
<p>詳細用法: <a class="reference internal" href="#id6">結果輔助方法</a></p>
</dd></dl>

</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="helpers.html" class="btn btn-neutral float-right" title="查詢輔助函數" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="queries.html" class="btn btn-neutral float-left" title="執行查詢" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2021 CodeIgniter 基金會 | 國立高雄師範大學軟體工程與管理學系 SDPM 實驗室譯製 
      <span class="lastupdated">
        最後更新於 2021年12月03日。
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>